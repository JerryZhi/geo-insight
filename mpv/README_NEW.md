# GEO Insight MVP - AI品牌可见性监测工具

## 项目简介

GEO Insight 是一个轻量级的品牌监测工具，专门用于分析品牌在大语言模型(LLM)回答中的可见性和提及情况。本项目是完整版 GEO Insight 的最小可行产品(MVP)版本。

## 主要功能

### 用户系统
- **用户注册与登录**: 安全的用户账户管理
- **个人仪表板**: 查看任务概览和统计信息
- **API配置管理**: 保存和管理多个大模型API配置
- **品牌配置历史**: 自动保存品牌监测配置
- **查询历史记录**: 完整的任务执行历史和结果管理

### 核心功能
- **文件上传**: 支持CSV和Excel格式的prompt清单上传
- **品牌配置**: 设置监测的品牌名称、网站域名和竞争对手
- **多API支持**: 兼容OpenAI、Claude等多种大模型API
- **批量查询**: 异步并发处理，提高查询效率
- **智能分析**: 自动识别品牌提及并生成统计报告
- **结果可视化**: 图表展示品牌提及分布和趋势
- **数据导出**: 支持CSV格式报告下载

### 用户体验
- **响应式设计**: 适配桌面和移动设备
- **拖拽上传**: 支持文件拖拽上传
- **实时反馈**: API连接测试和任务进度显示
- **配置记忆**: 自动保存用户偏好设置

## 快速开始

### 环境要求
- Python 3.8+
- 现代浏览器 (Chrome, Firefox, Safari, Edge)

### 安装步骤

1. **克隆项目**
```bash
git clone <项目地址>
cd geo-insight/mpv
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **初始化系统**
```bash
python setup.py
```

4. **启动应用**
```bash
python app.py
```
或使用批处理脚本：
```bash
start.bat
```

5. **访问应用**
打开浏览器访问: http://localhost:5000

### 默认账户
初始化后会创建一个管理员账户：
- 用户名: `admin`
- 密码: `123456`
- 邮箱: `admin@example.com`

## 使用指南

### 1. 账户管理
- **注册**: 访问注册页面创建新账户
- **登录**: 使用用户名和密码登录系统
- **仪表板**: 查看任务概览、API配置状态和历史记录

### 2. API配置
- 在"配置管理"页面添加大模型API配置
- 支持配置名称、端点、密钥和模型等信息
- 可设置默认配置并测试连接状态
- 配置将安全加密存储

### 3. 创建监测任务
1. **上传Prompts文件**
   - 支持CSV和Excel格式
   - 第一列应包含要查询的prompts
   - 支持拖拽上传

2. **配置品牌信息**
   - 设置要监测的品牌名称
   - 可选设置网站域名
   - 支持使用已保存的配置

3. **选择API配置**
   - 使用已保存的API配置
   - 或输入新的API信息
   - 测试API连接确保正常

4. **调整高级设置**
   - 并发数量 (1-5)
   - 请求延迟 (0.2-2秒)
   - 根据API限制调整参数

### 4. 查看结果
- **统计概览**: 总提及次数、成功查询数等关键指标
- **品牌分析**: 各品牌提及次数和分布
- **详细列表**: 每个prompt的查询结果和分析
- **可视化图表**: 品牌提及分布饼图
- **数据导出**: 下载CSV格式的详细报告

### 5. 历史记录
- 查看所有历史任务
- 按状态筛选 (已完成/进行中/失败)
- 重新查看历史结果
- 下载历史报告

## API配置示例

### OpenAI API
```
端点: https://api.openai.com/v1/chat/completions
密钥: sk-your-openai-api-key
模型: gpt-3.5-turbo
```

### Claude API
```
端点: https://api.anthropic.com/v1/messages
密钥: your-claude-api-key
模型: claude-3-sonnet-20240229
```

### 其他兼容API
支持任何遵循OpenAI API格式的服务，如：
- Azure OpenAI
- 通义千问
- 文心一言
- ChatGLM

## 文件格式要求

### CSV格式示例
```csv
prompt
"推荐一些好用的项目管理工具"
"什么是最佳的云服务提供商"
"如何选择合适的数据库系统"
```

### Excel格式
- 支持 .xlsx 和 .xls 格式
- 第一列为prompts内容
- 建议每行一个prompt
- 最多支持1000行数据

## 技术架构

### 后端技术
- **Flask**: Web应用框架
- **SQLite**: 轻量级数据库
- **asyncio/aiohttp**: 异步HTTP请求
- **pandas**: 数据处理
- **Werkzeug**: 安全密码哈希

### 前端技术
- **Bootstrap 5**: 响应式UI框架
- **Chart.js**: 数据可视化
- **Bootstrap Icons**: 图标库
- **原生JavaScript**: 交互逻辑

### 安全特性
- 密码哈希存储
- API密钥加密存储
- 用户数据隔离
- Session管理
- 输入验证和过滤

## 系统限制

### MVP版本限制
- 单次最多处理20个prompts
- 基础的品牌识别算法
- 本地SQLite数据库
- 单用户并发限制

### 资源限制
- 文件上传: 最大16MB
- 内存使用: 取决于prompts数量和响应长度
- 并发请求: 建议不超过5个

## 故障排除

### 常见问题

**1. API连接失败**
- 检查API端点和密钥是否正确
- 确认网络连接正常
- 验证API服务状态

**2. 文件上传失败**
- 确认文件格式为CSV或Excel
- 检查文件大小不超过16MB
- 验证文件编码(建议UTF-8)

**3. 数据库错误**
- 重新运行 `python setup.py`
- 检查文件权限
- 确认磁盘空间充足

**4. 页面无法访问**
- 确认Flask应用正在运行
- 检查端口5000是否被占用
- 验证防火墙设置

### 日志查看
应用运行时会在控制台输出详细日志信息，包括：
- API请求状态
- 错误信息
- 数据处理进度

## 开发计划

### 即将推出的功能
- 更多API支持
- 高级分析算法
- 批量任务管理
- 数据导出格式选择
- 用户权限管理

### 长期规划
- 分布式部署支持
- 实时监测功能
- 高级可视化图表
- API接口开放
- 企业级功能

## 贡献指南

欢迎提交问题反馈和功能建议！

### 问题反馈
- 使用GitHub Issues报告bug
- 提供详细的错误信息和复现步骤
- 包含系统环境信息

### 功能建议
- 在Issues中提出新功能建议
- 详细描述功能需求和使用场景
- 讨论实现方案

## 许可证

[项目许可证信息]

## 联系方式

- 项目主页: [GitHub链接]
- 问题反馈: [Issues链接]
- 邮箱联系: [联系邮箱]

---

**注意**: 这是MVP版本，仅用于演示和测试。生产环境使用请考虑安全性、性能和扩展性等因素。
